<h3 class="subtitle">{{ isEditingMode() ? 'Update the event' : 'Create a new event' }}</h3>

@if(!isEditingMode()){
    <a routerLink="/events">‚Üê Go back</a>
  }

<div class="form-container">
  <form class="form" [formGroup]="eventForm" (ngSubmit)="onSubmit()">
    <div class="input-div">
      <label class="label" for="name">Event name:</label>

      <input
        class="input"
        placeholder="Enter the event name..."
        formControlName="name"
        type="text"
        id="name"
      />
      @if(eventForm.get("name")?.invalid && eventForm.get("name")?.touched){
      <p class="error">
        @if(eventForm.get("name")?.errors?.['required']){ This field is required.}
        @if(eventForm.get("name")?.errors?.['minl ength']){Name must be at least 3 characters}
      </p>
      }
    </div>

    <div class="input-div">
      <label class="label" for="date">Date:</label>

      <input
        class="input"
        formControlName="date"
        type="date"
        id="date"
        placeholder="Enter the event date..."
      />

      @if(eventForm.get("date")?.invalid && eventForm.get("date")?.touched){
      <p class="error">This field is required.</p>
      }
    </div>

    <div class="input-div">
      <label class="label" for="category">Category:</label>
      <select class="input" formControlName="category" id="category">
        <option value="">Select an option</option>
        @for (category of categories(); track category.id) {
        <option [value]="category.id">{{ category.name }}</option>
        }
      </select>
      @if(eventForm.get("category")?.invalid && eventForm.get("category")?.touched){
      <p class="error">Please select a category.</p>
      }
    </div>

    <div class="input-div">
      <label class="label" for="description">Description:</label>
      <textarea
        class="input"
        formControlName="description"
        placeholder="Enter a brief description..."
        id="description"
      ></textarea>
      @if (eventForm.get("description")?.invalid && eventForm.get("description")?.touched) {
      <p class="error">
        @if (eventForm.get("description")?.errors?.['required']) { This field is required.} @if
        (eventForm.get("description")?.errors?.['minlength']) {Description must be at least 3
        character.}
      </p>
      }
    </div>

    <button class="btn-submit" type="submit" [disabled]="eventForm.invalid">
      {{ isEditingMode() ? 'Update' : 'Create' }}
    </button>

    @if(isEditingMode()){
      <a [routerLink]="['/events', eventSelected()?.id]"> Cancel update</a>
    }
  </form>

  
</div>

